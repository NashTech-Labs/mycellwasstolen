@(regType: String, mobileRegistrationForm: Form[model.domains.Domain.MobileRegisterForm], brands: List[model.domains.Domain.Brand]) 

@import helper._
@implicitFieldConstructor = @{ FieldConstructor(twitterBootstrapInput.f) }

@helper.form(action =routes.MobileController.mobileRegistration, 'id ->"mobileRegistrationForm",'enctype -> "multipart/form-data") {

	<fieldset>
		<input type="hidden" name="regType" id="regType" value="@regType">
		<input type="hidden" name="document" id="document" value="">
	
		@inputText(mobileRegistrationForm("userName"), '_label -> "Name")
	
		@select(field=mobileRegistrationForm("mobileName"),options=brands.map(x=>
		(x.id.get.toString -> (x.name))).toSeq, '_label -> "Mobile Brand",
		'_default -> "-- Choose Mobile Name --", '_showConstraints ->
		false,'_error ->
		mobileRegistrationForm("mobileName").error.map(_.withMessage("Mobile Brand Required")))
	
		@select(field=mobileRegistrationForm("mobileModel"),options=None.toSeq,
		'_label->"Mobile Model", '_default -> "-- Choose Mobile Model --",
		'_showConstraints -> false,'_error ->
		mobileRegistrationForm("mobileName").error.map(_.withMessage("Mobile Model Required")))
	
	
		@inputText(mobileRegistrationForm("email"), '_label -> "Email")
		@inputText(mobileRegistrationForm("imeiMeid"), '_label -> "Mobile IMEI/MEID") 
		@inputText(mobileRegistrationForm("purchaseDate"),'_label-> "Purchase Date", '_id-> "purchaseDate", 'class ->
		"datepicker", 'style -> "datepicker")
		@inputText(mobileRegistrationForm("contactNo"), '_label -> "Mobile No.",'_type->"tel", 'pattern->"[0123456789+ ]{13,17}",'title->"Mobile number must be of 13 to 17 digit with code") 
		@textarea(field=mobileRegistrationForm("description"), args = 'rows -> 3, 'cols -> 25, '_label->"Description")
	
		@inputFile(mobileRegistrationForm("fileUpload"),'_label->"Document",'_name->"fileUpload",'_type->"File")
	</fieldset>

	<div class="form-group">
		<div class="col-lg-10 col-lg-offset-4">
			<button class="btn btn-primary" type="submit" onClick="setValue();">Submit</button>
			<button class="btn btn-default" type="reset">Cancel</button>
		</div>
	</div>
}
	<script src="@routes.Assets.at("javascripts/jquery.validate.min.js")" type="text/javascript"></script>
	<script src="@routes.Assets.at("javascripts/bootstrap-datepicker.js")" type="text/javascript"></script>
	<script src="@routes.Assets.at("javascripts/intlTelInput.min.js")" type="text/javascript"></script>

	<script type="text/javascript">
	
		function setValue(){
			var file = $("#fileUpload").val();
			$("#document").val(file);
		}
	
	   $("#contactNo").intlTelInput();
	
		$(document).ready(function() {
			$("#mobileName").change(function() {
				var mobileNameId = $(this).val();
				mobileModels(mobileNameId);
			});
		});
	
		var mobileAjaxSuccess = function(data) {
			$("#mobileModel").empty();
			$('#mobileModel').append($('<option>', {
				value : "-- Choose Mobile Model --",
				text : "-- Choose Mobile Model --"
			}));
			
			$.each(data, function(i, d) {
				$('#mobileModel').append($('<option>', {
					value : d.mobileModel,
					text : d.mobileModel
				}));
			});
			console.debug("Success of Ajax Call");
			console.debug(data);
		};
	
		var mobileAjaxError = function(err) {
			console.debug("Error of ajax Call");
			console.debug(err);
		};
	
		var mobileModels = function(mobileNameId) {
	
			var mobileAjaxCallBack = {
				success : mobileAjaxSuccess,
				error : mobileAjaxError
			};
	
			jsRoutes.controllers.MobileController.getMobileModels(mobileNameId)
					.ajax(mobileAjaxCallBack);
		};
	
		 $("#mobileRegistrationForm").validate({
			rules : {
				imeiMeid : {
					required : true,
					remote : {
						url : '/isImeiExist',
						type : 'GET',
						data : {
							imeiId : function() {
								return $("#imeiMeid").val();
							}
						}
					}
				},
				email : {
					required : true,
					maxlength : 100,
					email : true,
				},
				userName : {
					required : true,
					maxlength : 100
				},
				mobileModel : {
					required : true,
					maxlength : 100
				},
				mobileName : {
					required : true,
					maxlength : 100
				},
				contactNo : {
					required : true,
					maxlength : 100
				},
				purchaseDate : {
					required : true,
					maxlength : 100
				},
				description : {
					required : true,
					maxlength : 100
				},
				fileUpload : {
					required : true,
					maxlength : 100
				}
			},
			messages : {
				imeiMeid : {
					remote : "This imeiMeid is already exist."
				}
			}
		});
		
		 $("#purchaseDate").datepicker();
	</script>
