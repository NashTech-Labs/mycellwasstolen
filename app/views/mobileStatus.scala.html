@(mobileStatusForm: Form[model.domains.Domain.MobileStatus], user: Option[model.domains.Domain.User])(implicit flash: Flash)
@import helper._
@implicitFieldConstructor = @{ FieldConstructor(twitterBootstrapInput.f) }

@main("Check Cell Status-stolencell",user){
<div class="container">
		<div class="page-header">
			<h1>Check Mobile Status</h1>
		</div>
		<div class="panel panel-success">
			<div class="panel-heading">
				<h3 class="panel-title">Check Status</h3>
			</div>
			<div class="panel-body">
				<div class="row">
					@flash.get("ERROR").map { message =>
						<div class="alert alert-dismissable alert-danger">
							<strong>@message</strong>
						</div>
					}
					
					@flash.get("SUCCESS").map { message =>
						<div class="alert alert-dismissable alert-success">
							<strong>@message</strong>
						</div>
					}
				</div>
				<div class="row">
					<div class="col-lg-8">
						<div class="well">
							<div class="panel-heading">
								<h5 class="title">Coming Soon - Check IMEI by sending an <img src="@routes.Assets.at("images/sms2.jpg")" alt="...">(premium service)</h5>
							</div>
							<div class="panel panel-info">
								<div class="panel-heading">
									<h1 class="panel-title">Check Cell Status</h1>
								</div>
							</div>
							<input type="text" id="imeiMeid" name="imeiMeid" placeholder="IMEI/MEID">
							<div class="form-actions">
							<br>
							<input type="submit" value="Check Status" class="btn btn-primary"
									onClick="showMobileRecord();">
							</div>
							<br>
							<div id="mobileRecords">
							</div>
						</div>
					</div>
					<div class="col-lg-4">
						<div class="well">
							<div class="panel panel-warning">
								<div class="panel-heading">
									<h1 class="panel-title">Register and be safe</h1>
								</div>
								<div class="panel panel-info title-margin">
									<div class="panel-heading">
										<h1 class="panel-title">I want to declare my ownership</h1>
									</div>
									<div class="panel-body">
									A lemon cell is analogous to a <a href="http://en.wikipedia.org/wiki/Lemon_(automobile)">lemon automobile</a> where 
									you find out problems, much after the purchase has been 
									made. If you buy a cell phone, which has a stolen record, 
									then you could get into multiple problems.<b>To check the cell
									 phone status</b>, all you need is the IMEI/MEID number of the
									  cell that you want to check. It is found printed inside 
									  the battery compartment of the phone. It can also be 
									  displayed on the screen of the phone by entering 
									  <b>*#06#</b> onto the keypad on most phones. Blackberry users click 
									  <a href="https://bis.na.blackberry.com/html/web/help/en/find_BB_PIN_IMEI_ESN_MEID_221674_11.html">here </a>.
										<div><h5>How To Read The Report ?</h5>
											<div>
												<img src="@routes.Assets.at("images/Green.jpg")" alt="...">
													<div>Indicates that this Phone is registered with us as a clean phone.
													</div>
											</div>
											<div>
												<img src="@routes.Assets.at("images/yellow.svg")" alt="...">
													<div>Indicates that the cell's IMEI is found in records but
													is yet to be approved. We will provide the reports soon.
													</div>
											</div>
											<div>
												<img src="@routes.Assets.at("images/red.jpg")" alt="...">
													<div>Indicates that this Phone is registered as stolen/lost. 
												You must exercise extreme caution if you are planning to buy
												 this phone.
													</div>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
    </div>
    <!-- Modal -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 class="modal-title" id="myModalLabel">Mobile Status</h4>
      </div>
      <div class="modal-body" id="modalBody">
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->
    
<script src="@routes.Assets.at("javascripts/jquery.validate.min.js")" type="text/javascript"></script>

<script type="text/javascript">
		function showMobileRecord() {
			var imeid = $('#imeiMeid').val();
			if($('#imeiMeid').val() == ''){
				$("#mobileRecords").addClass("alert alert-danger");
				$("#mobileRecords").html("Data Not Found");
			}
			else{
			mobileRecord(imeid);
			}
		}

		var mobileAjaxSuccess = function(data) {
			if (data.status == "Ok") {
				var mobile = data.mobileData;
				if(mobile.regType=="stolen"){
					var image='<img src="/assets/images/red.jpg"  alt="...gjkbjkhjk..."/>';
				}
				else{
					var image='<img src="/assets/images/Green.jpg"  alt="...gjkbjkhjk..."/>';
				}
				var mobileData = '<div id="mobile-status"><table class="table table-bordered"><tr><th>IMEI</th><th>Other IMEI</th><th>Mobile Name</th><th>Mobile Model</th><th>Contact No</th><th>Status</th><th>Label</th></tr><tr><td>'
						+ mobile.imeiMeid
						+ '</td><td>'
						+ (mobile.otherImeiMeid == "" ? "None" : mobile.otherImeiMeid)
						+ '</td><td>'
						+(mobile.mobileName.match(/~Other.*/) ? mobile.otherMobileBrand : mobile.mobileName)
						
						+ '</td><td>'
						+(mobile.mobileModel.match(/~Other.*/) ? mobile.otherMobileModel : mobile.mobileModel)
						+ '</td><td>'
						+ mobile.contactNo
						+ '</td><td>'
						+ mobile.regType
						+'</td><td>'
						+ image + '</td></tr></table></div>';
				$("#mobileRecords").empty();
				$("#mobileRecords").removeClass("alert alert-danger");
				$('#modalBody').html(mobileData);
				$('#myModal').modal('show');
				
				
			} else {
				$("#mobileRecords").addClass("alert alert-danger");
				$("#mobileRecords").html("Data Not Found");
				console.debug("Data no found");
			}
			console.debug("Success of Ajax Call");
			console.debug("Success of Ajax Call" + data);
		};

		var mobileAjaxError = function(err) {
			console.debug("Error of ajax Call");
			console.debug(err);
		};

		var mobileRecord = function(imeid) {

			var mobileAjaxCallBack = {
				success : mobileAjaxSuccess,
				error : mobileAjaxError
			};

			jsRoutes.controllers.MobileController.getImeiMeidList(imeid).ajax(
					mobileAjaxCallBack);
		};
		
	     
	    $("#imeiMeid").rules("add", {
	 			required : true
	 		});		
</script>	           	
	
}